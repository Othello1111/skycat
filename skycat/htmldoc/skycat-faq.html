<HTML>
<HEAD>
<TITLE>skycat - Frequently Asked Questions</TITLE>
<!-- Changed by: Allan Brighton, Daniel Durand 12-Feb-1996 -->
<!-- Changed by: Miguel Albrecht, 13-Feb-1996 -->
<!-- Changed by: Allan Brighton, 27-Jun-1996 -->
<LINK REV="made" HREF="mailto:abrighto@eso.org">
</HEAD><BODY BGCOLOR="#FFFFFF">

<CENTER>
<A HREF="skycat.html">
<IMG SRC="skycat-logo.gif" BORDER=1></A>
</CENTER>
<P>

<CENTER>
<H2>
<FONT SIZE=+3>SKYCAT</font>
<FONT SIZE=+3>FAQ</FONT><BR>
<FONT SIZE=+3>F</FONT>REQUENTLY
<FONT SIZE=+3>A</FONT>SKED
<FONT SIZE=+3>Q</FONT>UESTIONS
</H2>
</CENTER>

<P>

<B>
Return to <A HREF="skycat.html"><i>skycat</i> Main Page</A>
</B>
</CENTER>
<P>

<HR SIZE=4>

<P>

<DL>
<DT>
<B>
F<FONT SIZE=-1>EATURES</FONT>
</B>

<OL>

<LI><A HREF="#xref:cmdlineop">What command-line options does <i>skycat</i> support?</A>
<LI><A HREF="#xref:getsrc">Where can I get the source code for <i>skycat</i>?</A>
<LI><A HREF="#xref:getbin">Where can I get a binary release of <i>skycat</i>?</A>
<LI><A HREF="#xref:addcat">How can I add my own catalogs to <i>skycat</i>?</A>
<LI><A HREF="#xref:morepreview">What are the special MORE and PREVIEW catalog columns?</A>
<LI><A HREF="#xref:remote">What remote interfaces are there to access <i>skycat</i>?</A>
<LI><A HREF="#xref:sendskycat">What commands can I send to <i>skycat</i> with Tk send?</A>
<LI><A HREF="#xref:remotesocket">How does the remote socket interface to <i>skycat</i> work?</A>
<LI><A HREF="#xref:shmem">How can I access <i>skycat</i> images in shared memory?</A>
</OL>
</DL>
<P>

<DL>
<DT>
<B>
P<FONT SIZE=-1>ROBLEMS</FONT>
</B>

<OL>

<LI><A HREF="#xref:colorflash">Why do I sometimes get color flashing when using <i>skycat</i>?</A>

<LI><A HREF="#xref:usecolor"><i>skycat</i> uses up all of the colors in my colormap. How do I make it stop?</A>

<LI><A HREF="#xref:slowcat">What does the catalog window take so long to pop up?</A>

</OL>
<P>
</DL>

<HR SIZE=4>

<P>

<DL>

<DT>
<B><A NAME="xref:cmdlineop">What command-line options does <i>skycat</i> support?</A>
</B>
<p>
<DD>
In general, the syntax is:
<BLOCKQUOTE>
 skycat <I>fileName -option value ...</I>
</BLOCKQUOTE>
An argument not starting with "-" is taken to be a FITS image file to load.
A "-" by itself means: read the FITS file from the standard input. A file with the
suffix ".hfits" is taken to be an H-compressed FITS file and is decompressed automatically.
A ".gfits" or ".gzfits" suffix indicates that the FITS file is GZIP compressed and a suffix of
 ".cfits" is assumed to be UNIX compressed. Image formats other than FITS are not currently
supported, but will be in a future release.
<P>
The following options are supported:
<P>
<TABLE CELLSPACING=5 CELLPADDING=5 WIDTH="90%">

<TR><TD><B>-file</B> <I>FITSfile</I></TD>
<TD>
        Specify a FITS file to load. The '-file' part is optional, so
        you can also simply specify a file name, as described above.
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-cat</B> <I>bool</I></TD>
<TD>
        If bool is 1, include 'Data-Servers' menu in the menubar (This
        is the default). The 'Data-Servers' menu gives you access to
        the ESO/Archive extensions for browsing astronomical catalogs,
        plotting objects in the image window and getting images over
        the network from the image servers, such as the Digitized Sky
        server.
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-rtd</B> <I>bool</I></TD>
<TD>
        If bool is 1, include the Real-Time menu in the menubar
        (default is 0). The Real-Time menu gives you access to the VLT
        Real-Time Display features, such as camera control and rapid
        frames. To use these features, the rtdServer daemon must be
        running on the local host. A client application, linked with
        the Rtd image event library can then send images via shared
        memory to be displayed in rapid succession.
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-port</B> <I>portnum</I></TD>
<TD>
        Specify a port number to ue for the remote socket interface.
        The default is 0, which means choose an unused port. 
        See the <a href="ftp://ftp.archive.eso.org/pub/skycat/doc"><i>RTD User's Guide</i></a> 
        for a description of the remote socket interface.

</TD></TR><P>

<TR VALIGN=TOP><TD><B>-disp_image_icon</B> <I>bool</I></TD>
<TD>
        If bool is 1 (default), display a miniature version of the
        image in the tool's icon window.
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-default_cmap</B> <I>cmap</I></TD>
<TD>
        Specify the default colormap. This should be one of the names
        listed in the 'Colors' popup window (default is 'real').
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-default_itt</B> <I>itt</I></TD>
<TD>
        Specify the default intensity transfer table. This should be
        one of the names listed in the 'Colors' popup window (default
        is 'ramp').
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-colorramp_height</B> <I>pixels</I></TD>
<TD>
        This option can be used to change the height of color bar (the
        widget at the bottom of the screen displaying the image
        colors).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-with_colorramp</B> <I>bool</I></TD>
<TD>
        If bool is true, display the color bar (default).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-with_zoom_window</B> <I>bool</I></TD>
<TD>
        If bool is true, display the zoom window (default).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-with_pan_window</B> <I>bool</I></TD>
<TD>
        If bool is true, display the pan window (default).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-dozoom</B> <I>bool</I></TD>
<TD>
        If bool is true, turn the zoom window on automatically
        (default).
</TD></TR><P>


<TR VALIGN=TOP><TD><B>-debug</B> <I>bool</I></TD>
<TD>
        If bool is true (default: false) turn on debugging features. This also enables the
        real-time simulation (when the -rtd option was specified).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-verbose</B> <I>bool</I></TD>
<TD>
        If bool is true (default: false) display debugging messages at run-time (for debugging).
</TD></TR><P>

<TR VALIGN=TOP><TD><B>-display</B>&nbsp;<I>dpy</I></TD>
<TD>Specify the X server to use.</TD></TR><P>

</TABLE><P>

Arguments which are not switches are interpreted as image files.
<P>

<DT>
<B><A NAME="xref:getsrc">Where can I get the source code for <i>skycat</i>?</A>
</B>

<DD> The software is available as 
<a href="ftp://ftp.archive.eso.org/pub/skycat/">
<i>source code</i>
</a>
for research and other non-profit organizations. If you are
interested to obtain the package send us a note.
<P>

<DT>
<B><A NAME="xref:getbin">Where can I get a binary release of <i>skycat</i>?</A>
</B>

<DD> Single <a href="ftp://ftp.archive.eso.org/pub/skycat/"><i>binary versions</i></a> 
of  <i>skycat</i> are available for Solaris, HP-UX and SunOS. These binaries were
built using code borrowed from GNU emacs (unexec) that makes it possible to include interpreted
sources and other files in an executable.
<P>


<DT>
<B><A NAME="xref:addcat">How can I add my own catalogs to <i>skycat</i>?</A></B>

<DD> First of all, you should have a look at the <a
href="http://archive.eso.org/skycat/skycat2.0.cfg"><i>skycat</i>
config file</a> This file lists the catalogs available by default. You
can use a different list by setting the environment variable
<TT>SKYCAT_CONFIG</TT> to a valid URL on an http server.  If you want
us to add your catalog to the default list, send us an email.<br>
More about catalog servers can be found in the 
<a href="skycat-server.html">note written by 
Clive Davenhall</a> (Starlink).
<P>

    To include your own catalog in <i>skycat</i>, you have to
implement a <I>catalog server</I>, and add an entry to the
<i>skycat</i> config file for it.

<P> 

Note that there has been some discussion about standards for catalog servers and
the URL syntax used to access them.
Please see <A HREF="http://vizier.u-strasbg.fr/doc/asu.htm">Astronomical Server URL</A> 
for more information on that.
<P>

A catalog server is called via HTTP as a cgi-bin
application. The syntax for the URL is taken from the <i>skycat</i>
config file. The URL contains the query parameters, such as RA, DEC,
RADIUS, etc.  The format of the return value is a tab separated table
with column headings separated from data by a dashed line "---".

<LISTING>
TableTitle

# comments, text, etc...
...
    
ID      RA      DEC     OtherCols
----    ----    ----    ---------
someId1 42.331  43.233  etc...
...

</LISTING>
<P>

<i>skycat</i> expects the first three columns to always be: ID, RA and
DEC. The following columns can be anything. RA and DEC should be in
degrees, J2000. In the the query arguments, RA and DEC are specified
in HH:MM:SS.sss format and the <I>radius</I> in arcmin.
<P>

<DT>
<B><A NAME="xref:morepreview"></A>What are the special MORE and PREVIEW catalog columns?</B>

<DD> There are two special (optional) catalog column names: <TT>MORE</TT> and <TT>PREVIEW</TT>.
They are expected to contain a URL in the format
<TT>M=http://...</TT> for <U>MORE</U> and <TT>P=http://...</TT> for
<TT>PREVIEW</TT>.  

<P>
The <TT>MORE</TT> URL should point to an HTML page
with more information on the object. <i>skycat</i> passes the URL to
netscape for display. 

<P>
The <TT>PREVIEW</TT> URL should
point to either a FITS image (possibly compressed) of the selected object 
or a tab table with data to plot as an X,Y graph. The Content-type of the
HTTP result is used to determine whether the data is a FITS image or a tab table
and whether or not it is compressed. 
The <a href="http://vizier.u-strasbg.fr/doc/asu.htm"><i>Astronomical Server URL document</i></a> 
mentioned above describes the allowed Mime-type/Content-type values. 
These have been implemented in skycat. 

<P>
If the Content-type of the PREVIEW data returned from an HTTP server is recognized
as a tab table (text/x-starbase, etc., or even text/plain), it it should be an 
ASCII tab table with 2 columns. The first column is plotted as X and the second as Y
and the column headings are displayed as the X and Y graph labels.
<P>


<DT>
<B><A NAME="xref:remote"></A>What remote interfaces are there to access <i>skycat</i>?</B>

<DD> There are a number of ways to access skycat data or commands from an external process:
<P>
<ul>
  <li> Tk send, plus a collection of simple Tcl procs defined by Skycat 
       <br>
       (see <A HREF="#xref:sendskycat">below</A>
       and also the comments at end of <code>skycat/interp/library/Skycat.tcl</code>)<p> 

  <li> Remote socket interface 
       <br>
       (see <code>rtd/rtdrmt</code> module for examples)<p> 

  <li> SysV shared memory for image header and data 
       <br>
       (see rtdimage "<code>shm</code>" subcommand)<p> 

  <li> MMAP shared file/memory for image header and data 
       <br>
       (mmap is used by default to read the image files)<p> 

  <li> Rtd real-time interface (rtdServer)<p> 
</ul>

<P>


<DT><B><A NAME="xref:sendskycat"></A>What commands can I send to <i>skycat</i> with Tk send?</B>

<DD>
If Skycat is compiled with Tk send enabled (you have to edit the Tk Makefile to do this if you
compile yourself) there are some simple Tcl procedures defined that can easily be called from
another Tk based application:
<P>
<ul>  
	<li> <code><b>get_catalog_info</b></code> {} <br> 
		- return contents of catalog listing in the format
		{{selected_row} {{row1} {row2} ...}}
        <p>
  	<li> <code><b>display_image</b></code> {<code>ra dec width height {equinox 2000}</code>}  <br> 
		- display image from DSS
        <p>
	<li> <code><b>mark_image</b></code> {<code>ra dec width height</code>}  <br> 
		- draw a rectangle on the image, return id
        <p>
	<li> <code><b>unmark_image</b></code> {<code>id</code>}  <br> 
		- remove the rectangle given by id
        <p>
	<li> <code><b>load_image</b></code> {<code>filename</code>}  <br> 
		- load and display an image file
        <p>
	<li> <code><b>pick_object</b></code> {<code>{cmd ""}</code>}  <br> 
		- display the "PickObject" dialog window to allow the user to select
		  an object/star and return the info for it in the form:
 		  {$x $y $ra $dec $equinox $fwhmX $fwhmY $angle $object $background}
	
</ul>

<P>
See also the comments at end of source file:  cat/tclcat/library/SkyCat.tcl.
The PickObject interface is (or will be) described in the man page RtdImagePick(n).


<P>
<DT><B><A NAME="xref:remotesocket"></A>How does the remote socket interface to <i>skycat</i> work?</B>

<DD> The remote socket interface is an RTD feature described in the RTD User's Guide, which can be
found in the <a href="ftp://ftp.archive.eso.org/pub/skycat/doc"><i>doc</i></a> directory
of the skycat ftp dir.  

<P>
Basically, what you can do is open a socket
connection and send ASCII strings to Skycat (since it is based on the
RTD). The port number can be specified on the Skycat command line with the
<code>-port</code> <em>num</em> option.

<P>
The strings are interpreted as RTD subcommands.  The command
method is called with the given arguments and the result is returned
via socket again.  It is similar to Tk send, except that it is more
secure (you can only access RTD subcommands) and can easily be used by
a C application (or any other language).
<P>
The format to send a command is: 

<listing>command\n</listing>

(command followed by newline) where <code>command</code> is one of the
RTD subcommands (without an instance name).  The result read from the
socket has the format: 

<listing>
status length \n result[length]
</listing>

That is, 2 lines: the first line contains 2 numbers: the command
status (0 is OK) and the length of the result. The next line contains
the result, which has the given length.

<P>
Check out RTD User's Guide and the rtd/rtdrmt directory in the Skycat
source tree for examples of how to use the remote interface.


<P>
<DT><B><A NAME="xref:shmem"></A>How can I access <i>skycat</i> images in shared memory?</B>

<DD> Skycat doesn't put images in sysV shared memory by default, since some
systems have a very low default limit on the number of available
sysV shared memory areas. However, there are commands (rtdimage
subcommands) to tell skycat to use shared memory for the internal FITS
image header or data or both. (Note: by default skycat maps the image files using
mmap(2).)
<ul>
<P>
  <li> You can use the <code>-shm_header 1</code> and <code>-shm_data 1</code> options
       when starting skycat, so that shared memory is used automatically.

<P>
  <li> Use the rtdimage subcommand "<code>shm</code>" (also available
  via the remote socket interface) to tell skycat to use shared memory
  and to get the shared memory ids.
</ul>
<P>
See the <a href="ftp://ftp.archive.eso.org/pub/skycat/doc"><i>RTD User's Guide</i></a> for a description of the rtdimage subcommands. 
<P>
<DT> <B><A NAME="xref:colorflash">Why do I sometimes get color flashing when using <i>skycat</i>?</A></B>

<DD>
If you are running other applications, such as <I>netscape</I>, that use many
colors, you may have this problem. Try running netscape with the
"-ncols 60" option, to limit the number of colors it uses to 60. You
can limit the number of colors <I>skycat</I> uses via the View menu (Colors
item).
<P>

<DT> <B><A NAME="xref:usecolor"><i>skycat</i> uses up all of the colors in my
colormap. How do I make it stop?</A></B>

<DD> Select <I>Colors...</I> from the <i>skycat</i> <I>View</I>
menu. There you can adjust the number of colors <i>skycat</i> uses by
moving the slider and pressing the <I>Allocate</I> button.  <P>

<DT>
<B><A NAME="xref:slowcat">What does the catalog window take so long to pop up?</A></B>

<DD> When you display the catalog (Data-Server or Image-Server) window
for the first time, it reads the <i>skycat</i> configuration file over
HTTP for the list of catalogs.  You can specify a local configuration
file by setting the environment variable <TT>SKYCAT_CONFIG</TT> to a
valid URL (http://... or file:/... for a local file). 
The default URL 
is: <a href="http://archive.eso.org/skycat/skycat2.0.cfg">http://archive.eso.org/skycat/skycat2.0.cfg</a>
<P>

</dl>
<HR SIZE=4>

<P>
<FONT SIZE=-1>
<I>
Please send questions or comments to
    <A HREF="mailto:abrighto@eso.org">abrighto@eso.org</A>.
<BR>
Copyright &copy; 1996 ESO - European Southern Observatory
<P>
<!-- hhmts start -->
Last modified: Thu Aug  6 20:37:07 MEST 1998
<!-- hhmts end -->
</I>
</FONT>

</BODY>
</CENTER>

